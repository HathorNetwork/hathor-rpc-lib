name: Deploy Web Wallet

on:
  push:
    branches: [release]
    tags: ['v*']

jobs:
  deploy-staging:
    if: github.ref == 'refs/heads/release'
    uses: ./.github/workflows/deploy-web-wallet-reusable.yml
    with:
      site: staging
      aws-region: us-east-1
      aws-role: arn:aws:iam::769498303037:role/WebWalletGitHubActionsRoleStaging

  deploy-production:
    if: startsWith(github.ref, 'refs/tags/v')
    uses: ./.github/workflows/deploy-web-wallet-reusable.yml
    with:
      site: production
      aws-region: us-east-1
      aws-role: arn:aws:iam::769498303037:role/WebWalletGitHubActionsRoleProduction